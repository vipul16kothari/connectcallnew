# In-Call Upgrade Feature - Visual Guide

## User Call Screen (Audio Call)

### Main Timer Display
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ”´                          â”‚  â”‚
â”‚  â”‚     25:30                    â”‚  â”‚ â† Large countdown timer
â”‚  â”‚    remaining                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚
â”‚        Sarah Chen                  â”‚
â”‚    10 coins/min â€¢ AUDIO            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Control Panel Layout
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚   â”Œâ”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”    â”Œâ”€â”€â”€â” â”‚
â”‚   â”‚ğŸ¤ â”‚    â”‚ ğŸ¥+  â”‚    â”‚ â˜ â”‚    â”‚ ğŸ’°â”‚ â”‚
â”‚   â””â”€â”€â”€â”˜    â”‚Switchâ”‚    â””â”€â”€â”€â”˜    â””â”€â”€â”€â”˜ â”‚
â”‚   Mute     â”‚Video â”‚   End Call  Coins â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚              â†‘                         â”‚
â”‚         NEW BUTTON!                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Button States

**Idle State (Ready to Request)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ğŸ¥    â”‚ â† Video camera icon
â”‚    +     â”‚ â† Plus badge
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Purple gradient with accent border
```

**Sending State**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    âŒ›    â”‚ â† Hourglass icon
â”‚ Sending..â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Animated loading state
```

**Pending State**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    âŒ›    â”‚
â”‚ Pending  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Waiting for host response
```

**Disabled State (3 Attempts Used)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ğŸ¥    â”‚ â† Gray color
â”‚    âœ—     â”‚ â† Disabled badge
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Grayed out, opacity 0.5, unresponsive
```

---

## Host Call Screen

### Upgrade Request Banner
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  ğŸ¥  Video Call Request        [ 12s ] â”‚ â”‚ â† Auto-timeout countdown
â”‚ â”‚      User wants to switch to video      â”‚ â”‚
â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”‚
â”‚ â”‚  â”‚ âœ— Reject   â”‚    â”‚ âœ“ Accept   â”‚     â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†‘ Slides in from top with spring animation
```

### Banner Color Scheme
```
Background: rgba(0, 0, 0, 0.95) - Dark, translucent
Border: Accent color with glow effect
Timeout Badge: Warning orange (#FFB800)
Reject Button: Gray with gray border
Accept Button: Teal/Green (#00D1C5) with glow
```

---

## Timer Animation (Upgrade Accepted)

### Spin-Down Sequence
```
Frame 1:  45:00  â† Initial audio time
Frame 5:  40:30
Frame 10: 35:45
Frame 15: 30:20
Frame 20: 15:10
Frame 25: 09:45
Frame 30: 07:30  â† Final video time

Total duration: ~1 second (smooth countdown effect)
```

### Visual Feedback During Animation
```
Before:                       After:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”´             â”‚          â”‚  ğŸ”´             â”‚
â”‚    45:00        â”‚   â”€â”€â”€â–¶   â”‚    07:30        â”‚
â”‚   remaining     â”‚          â”‚   remaining     â”‚
â”‚                 â”‚          â”‚                 â”‚
â”‚ 10 coins/min    â”‚          â”‚ 60 coins/min    â”‚
â”‚  â€¢ AUDIO        â”‚          â”‚  â€¢ VIDEO        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Low Balance Warning State

### When < 60 Seconds Remaining
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  âš ï¸                          â”‚  â”‚
â”‚  â”‚     00:45                    â”‚  â”‚ â† Orange/yellow color
â”‚  â”‚    remaining                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â† Pulsing orange border
â”‚                                    â”‚
â”‚  âš ï¸ Low balance! Add coins to      â”‚
â”‚     continue                       â”‚
â”‚                                    â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚     â”‚  ğŸ’° Add Coins    â”‚          â”‚ â† Prominent button
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Notification Messages

### User Notifications
```
âœ… "Upgrade request sent to host"
   (appears when request is sent)

ğŸ¥ "Upgraded to video call!"
   (appears when host accepts)

âŒ "Host declined video upgrade"
   (appears when host rejects)

âŒ "Maximum upgrade requests reached for this call"
   (appears after 3rd rejection)

âŒ "Call ended: Out of coins"
   (appears when timer reaches 00:00)
```

### Host Notifications
```
ğŸ”” [Banner appears with slide-in animation]
   "User wants to switch to video"
   (10-second auto-simulation in current implementation)
```

---

## Flow Diagrams

### Complete User Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User starts audio call                                   â”‚
â”‚   Timer: 30:00 (300 coins Ã· 10 coins/min)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User taps "Switch to Video" button                      â”‚
â”‚   Button state: idle â†’ sending â†’ pending                â”‚
â”‚   Attempts: 1/3                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–¼                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   ACCEPT    â”‚   â”‚   REJECT    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                â”‚
                â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Camera activates â”‚  â”‚ Error message     â”‚
    â”‚ Timer recalcs:   â”‚  â”‚ Button: idle      â”‚
    â”‚   30:00 â†’ 05:00  â”‚  â”‚ Attempts: 2/3     â”‚
    â”‚ Smooth animation â”‚  â”‚ Can try again     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ 2 more attempts â”‚
                         â”‚ before disabled â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Host Response Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Host receives upgrade request        â”‚
â”‚   Banner slides in from top          â”‚
â”‚   Timeout: 15 seconds                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼       â–¼       â–¼          â–¼
    â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”
    â”‚Acceptâ”‚ â”‚Rejectâ”‚ â”‚Timeoutâ”‚ â”‚Ignore â”‚
    â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚       â”‚       â”‚          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Banner slidesâ”‚
        â”‚ out & closes â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Cost Examples

### Example 1: Full Audio Call
```
Balance: 600 coins
Rate: 10 coins/min
Duration: 60 minutes

Timer Display:
Start: 60:00
After 30 min: 30:00
After 59 min: 01:00
After 60 min: 00:00 â†’ Call ends
```

### Example 2: Upgrade After 15 Minutes
```
Balance: 600 coins
Audio rate: 10 coins/min
Video rate: 60 coins/min

Initial:
  Duration: 60:00 (audio)

After 15 minutes:
  Spent: 150 coins
  Remaining: 450 coins

Upgrade accepted:
  New duration: 07:30 (video)
  Animation: 45:00 â†’ 07:30 in 1 second
```

### Example 3: Low Balance Warning
```
Balance: 100 coins
Rate: 60 coins/min (video)

Timer Display:
Start: 01:40
After 40 sec: 01:00 â†’ Warning appears
After 80 sec: 00:20 â†’ Orange pulsing
After 100 sec: 00:00 â†’ Call ends
```

---

## Responsive Design

### Timer Size Scaling
```
Portrait:  Large (4xl font)
Landscape: Medium (3xl font)
Tablet:    Extra Large (5xl font)
```

### Button Layout Adaptation
```
Phone (Portrait):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Mute] [Video]     â”‚
â”‚  [End]  [Coins]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Tablet (Landscape):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Mute] [Video] [End] [Coins]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Accessibility Features

### Color Contrast
- Timer text: High contrast white on dark background
- Warning state: Yellow/orange with dark background (WCAG AA+)
- Buttons: 3:1 minimum contrast ratio

### Touch Targets
- All buttons: 60Ã—60 minimum
- End call button: 70Ã—70 (larger target)
- Banner buttons: 48+ height (full width)

### Visual Feedback
- Button press: Opacity change (activeOpacity={0.7})
- State changes: Icon + text + color
- Loading states: Animated hourglass

---

## Performance Optimizations

### Animation Performance
- `useNativeDriver: true` for all animations
- 30fps for timer spin-down (smooth without overhead)
- Spring animations cached and reused

### State Management
- Minimal re-renders with `useRef` for animation values
- Debounced button presses (disabled state)
- Efficient timer updates (setInterval cleanup)

### Memory Management
- Cleanup functions for all intervals
- Animation cleanup on unmount
- Banner auto-dismiss prevents memory leak

---

This visual guide provides a comprehensive reference for understanding the implemented upgrade feature's UI and UX behavior.
